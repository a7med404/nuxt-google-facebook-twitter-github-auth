# auth

> My classy Nuxt.js project

## Build Setup

``` bash
# install dependencies
$ npm run install

# serve with hot reload at localhost:3000
$ npm run dev

# build for production and launch server
$ npm run build
$ npm run start

# generate static project
$ npm run generate
```

For detailed explanation on how things work, check out [Nuxt.js docs](https://nuxtjs.org).


## Resources
### Locations
#### OSX
- redis.conf file location 
  - sudo vi /usr/local/etc/redis.conf

### General
- https://devdocs.io/ CSS DOM DOM Events HTML HTTP JS documentation for everything
- https://webgems.io/ Accessibility, CSS, Daily, Design, Frontend, Fullstack, General, HTML, Icons, Javascript, PHP, Podcasts, Python, Ruby, Server, Utility Resources

### Design
- https://graphicdesign.stackexchange.com/questions/352/is-there-a-good-resource-or-tool-to-help-build-a-palette-color-scheme-around-col/357#357 Is there a good resource or tool to help build a palette/color scheme around colors I select?
- https://graphicdesign.stackexchange.com/questions/58257/what-is-the-difference-between-layout-and-design/58259#58259 What is the difference between layout and design?
- https://graphicdesign.stackexchange.com/questions/18630/coming-from-a-programming-background-where-should-i-start-to-learn-web-design/18651#18651 Coming from a programming background, where should I start to learn web design?
- https://graphicdesign.stackexchange.com/questions/29710/what-exactly-is-a-pixel/29762#29762 What exactly is a “Pixel”?
- https://graphicdesign.stackexchange.com/questions/37228/how-do-i-make-a-style-guide-template/37246#37246 How do I make a style guide template?
- https://graphicdesign.stackexchange.com/questions/15995/given-a-color-scheme-how-do-i-apply-to-website-design/15996#15996 Given a color scheme, how do I apply to website design?
- https://graphicdesign.stackexchange.com/questions/3245/how-can-i-improve-my-color-selection-skill How can I improve my color selection skill?
- https://graphicdesign.stackexchange.com/questions/41/what-web-graphics-formats-to-use/3156#3156 What web graphics formats to use?
- https://stackoverflow.com/questions/24433640/svg-icons-vs-png-icons-in-modern-web-sites https://stackoverflow.com/questions/24433640/svg-icons-vs-png-icons-in-modern-web-sites
- https://github.com/LisaDziuba/Awesome-Design-Tools The best design tools and plugins for everything

### UX
- https://ux.stackexchange.com/questions/67539/remember-me-login-functionality “Remember me” login functionality
- https://ux.stackexchange.com/questions/117972/where-to-show-session-has-expired Where to show session has expired
- https://ux.stackexchange.com/questions/7195/best-practices-for-warning-of-session-expiration Best Practices for Warning of Session Expiration
- https://ux.stackexchange.com/questions/38885/how-to-show-user-login-password-is-wrong-after-the-first-time-e-g-flash-wrong How to show user login password is wrong after the first time e.g. flash “wrong password” message

### Axios
- https://dev.to/kevinleedrum/axios-tips-for-real-world-apps-3bo4 Axios Tips for Real-World Apps 

### Security
- https://security.stackexchange.com/questions/157133/is-a-secure-cookie-without-the-httponly-flag-a-problem Is a secure cookie without the HttpOnly flag a problem?
- https://stackoverflow.com/questions/38954821/preventing-csrf-with-the-same-site-cookie-attribute/38957177#38957177 Preventing CSRF with the same-site cookie attribute
- https://security.stackexchange.com/questions/26481/web-application-cookie-expiry Web Application - Cookie Expiry
- https://security.stackexchange.com/questions/41/good-session-practices Good session practices

### SCSS
- https://medium.com/developing-with-sass/creating-a-dead-simple-sass-mixin-to-handle-responsive-breakpoints-889927b37740 Creating a Dead Simple Sass Mixin to Handle Responsive Breakpoints
- https://varvy.com/pagespeed/ Make your pages faster. Common page speed issues and their solutions are discussed and illustrated by Patrick Sexton.

### CSS
- https://stackoverflow.com/questions/4318471/property-0-or-property-0px-in-css 'property: 0' or 'property: 0px' in CSS?
- https://stackoverflow.com/questions/2189452/when-to-use-margin-vs-padding-in-css When to use margin vs padding in CSS
- https://stackoverflow.com/questions/6887336/what-is-the-difference-between-normalize-css-and-reset-css/8357635#8357635 What is the difference between Normalize.css and Reset CSS
- https://webdesign.tutsplus.com/tutorials/how-to-build-a-responsive-navigation-bar-with-flexbox--cms-33535 How to Build a Responsive Navigation Bar With Flexbox
- https://w3bits.com/animated-menu-icon-css/ Animated Hamburger Menu icon with Pure CSS
- https://css-tricks.com/three-line-menu-navicon/ Three Line Menu Navicon

### Vue
- https://stackoverflow.com/questions/33731939/vue-js-toggle-class-on-click Vue.js toggle class on click

### Vuex
- https://stackoverflow.com/questions/43027499/vuex-state-on-page-refresh/43027630#43027630 Vuex state on page refresh

### Express
- https://stackoverflow.com/questions/8539482/node-express-session-expire-event?rq=1 Node/Express: Session Expire Event?
- https://github.com/expressjs/session/issues/204 Callback for cookie expiration
- https://stackoverflow.com/questions/27783881/how-can-i-listen-to-session-destroyed-event How can I listen to session destroyed event?
- https://stackoverflow.com/questions/22925886/node-js-run-function-on-session-expiry-express-passport Node.js run function on session expiry Express & Passport
- https://stackoverflow.com/questions/46630368/how-to-extend-express-session-timeout How to extend express session timeout
- https://github.com/expressjs/session/issues/292 Passing new session value from server to user browser??
- https://github.com/expressjs/session/issues/169 So what exactly saveUninitialized is for?
- https://github.com/expressjs/session/issues/273 Use of resave and saveUninitialized configuration options
- https://stackoverflow.com/questions/40381401/when-to-use-saveuninitialized-and-resave-in-express-session When to use saveUninitialized and resave in express-session
- https://stackoverflow.com/questions/31385726/whats-the-difference-between-saveuninitialized-and-resave What's the difference between saveUninitialized and resave?
- https://github.com/expressjs/session/issues/445 ReplyError: ERR invalid expire time in set - using connect-redis
- https://github.com/expressjs/session/issues/189 cookie.expires goes back to original value on each reques

### Redis
- https://redis.io/topics/rediscli redis-cli, the Redis command line interface
- https://stackoverflow.com/questions/35745481/redis-cli-with-password Redis-cli with password

### Passport
- https://stackoverflow.com/questions/27637609/understanding-passport-serialize-deserialize Understanding passport serialize deserialize
- https://stackoverflow.com/questions/20387554/how-to-keep-alive-an-nodejs-passport-session/27608523#27608523 How to keep alive an NodeJS Passport session
- https://stackoverflow.com/questions/15388206/sending-back-a-json-response-when-failing-passport-js-authentication/34699181 Sending back a JSON response when failing Passport.js authentication
- https://stackoverflow.com/questions/38820251/what-is-req-isauthenticated-passportjs/38820680 what is req.isAuthenticated() passportJS
- https://github.com/jaredhanson/passport-facebook/issues/189 email is not returned
- https://stackoverflow.com/questions/26859349/can-you-authenticate-with-passport-without-redirecting Can you authenticate with Passport without redirecting?
- https://stackoverflow.com/questions/24595817/how-to-use-passport-facebook-login-without-redirection How to use Passport-Facebook login without redirection?
- https://github.com/jaredhanson/passport-twitter/issues/67 Get user email
- https://auth0.com/docs/connections/social/github Connect your app to GitHub
- https://github.com/tj/connect-redis/issues/251 Session TTL is auto-reset on each request even after session expiry (resave: false)

### PG
- https://github.com/brianc/node-postgres/issues/433 Query logging/debug output
- https://github.com/sheshbabu/freshlytics/blob/master/src/server/migrations/1561030715992_init.sql Node PG Migrate Sample Migration from a real world project
- https://github.com/brianc/node-postgres/issues?utf8=%E2%9C%93&q=bulk+insert List of all questions regarding bulk insert in pg module
- https://stackoverflow.com/questions/2276644/list-all-tables-in-postgresql-information-schema List all tables in postgresql information_schema
- https://github.com/salsita/node-pg-migrate/issues/153 Redo all

### Nuxt
- https://github.com/nuxt/nuxt.js/issues/2796 nuxtServerInit running on every time index page is reload
- https://github.com/nuxt/todomvc Nuxt.js TodoMVC Example
- https://github.com/nuxt/nuxt.js/issues?page=1&q=express-session&utf8=%E2%9C%93 Questions related to express-session in Nuxt

ReplyError: ERR invalid expire time in set
at new Command (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/redis/lib/command.js:12:22)
at RedisClient.set (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/redis/lib/commands.js:58:47)
at RedisStore.set (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/connect-redis/lib/connect-redis.js:58:19)
at Session.save (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/express-session/session/session.js:72:25)
at Session.save (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/express-session/index.js:395:15)
at ServerResponse.end (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/express-session/index.js:331:21)
at IncomingMessage.<anonymous> (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/webpack-hot-middleware/middleware.js:105:32)
at IncomingMessage.emit (events.js:198:13)
at IncomingMessage.EventEmitter.emit (domain.js:448:20)
at abortIncoming (_http_server.js:449:9)
at socketOnEnd (_http_server.js:464:5)
at Socket.emit (events.js:203:15)
at Socket.EventEmitter.emit (domain.js:448:20)
at endReadableNT (_stream_readable.js:1145:12)
at process._tickCallback (internal/process/next_tick.js:63:19)

Error: Failed to serialize user into session
at pass (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/passport/lib/authenticator.js:281:19)
at serialized (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/passport/lib/authenticator.js:286:7)
at passport.serializeUser (/Users/zup/Desktop/code/ACTIVE/auth-routes/server/config/passport.js:7:3)
at pass (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/passport/lib/authenticator.js:294:9)
at Authenticator.serializeUser (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/passport/lib/authenticator.js:299:5)
at SessionManager.logIn (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/passport/lib/sessionmanager.js:14:8)
at IncomingMessage.req.login.req.logIn (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/passport/lib/http/request.js:50:33)
at Strategy.strategy.success (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/passport/lib/middleware/authenticate.js:248:13)
at verified (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/passport-oauth2/lib/strategy.js:186:20)
at Strategy.passport.use.FacebookStrategy [as _verify] (/Users/zup/Desktop/code/ACTIVE/auth-routes/server/config/passport.js:50:7)
at /Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/passport-oauth2/lib/strategy.js:195:24
at /Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/passport-facebook/lib/strategy.js:183:5
at passBackControl (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/oauth/lib/oauth2.js:134:9)
at IncomingMessage.<anonymous> (/Users/zup/Desktop/code/ACTIVE/auth-routes/node_modules/oauth/lib/oauth2.js:157:7)
at IncomingMessage.emit (events.js:203:15)
at IncomingMessage.EventEmitter.emit (domain.js:448:20)

### Objects
#### Facebook Profile Object

{
    id: '2563240293762961',
    username: undefined,
    displayName: undefined,
    name: {
        familyName: 'Ramesh',
        givenName: 'Vivek',
        middleName: undefined
    },
    gender: undefined,
    profileUrl: undefined,
    emails: [{
        value: 'vivek.officialr@gmail.com'
    }],
    provider: 'facebook',
    _raw: '{"last_name":"Ramesh","first_name":"Vivek","email":"vivek.officialr\\u0040gmail.com","id":"2563240293762961"}',
    _json: {
        last_name: 'Ramesh',
        first_name: 'Vivek',
        email: 'vivek.officialr@gmail.com',
        id: '2563240293762961'
    }
}

#### Twitter Profile Object
{
    id: '877769196762914816',
    username: 'zupcoin',
    displayName: 'Zupcoin',
    emails: [{
        value: 'zupcoin@gmail.com'
    }],
    photos: [{
        value: 'https://pbs.twimg.com/profile_images/877770003189161984/HhaZWgHj_normal.jpg'
    }],
    provider: 'twitter',
    _raw: '{"id":877769196762914816,"id_str":"877769196762914816","name":"Zupcoin","screen_name":"zupcoin","location":"","description":"Zupcoin is a bot that lets you get the prices of any altcoin via messenger and track your investments","url":"https:\\/\\/t.co\\/0d4Ai4MANA","entities":{"url":{"urls":[{"url":"https:\\/\\/t.co\\/0d4Ai4MANA","expanded_url":"https:\\/\\/botlist.co\\/bots\\/zupcoin","display_url":"botlist.co\\/bots\\/zupcoin","indices":[0,23]}]},"description":{"urls":[]}},"protected":false,"followers_count":47,"friends_count":224,"listed_count":0,"created_at":"Thu Jun 22 06:04:19 +0000 2017","favourites_count":23,"utc_offset":null,"time_zone":null,"geo_enabled":false,"verified":false,"statuses_count":122,"lang":null,"status":{"created_at":"Wed May 08 14:16:09 +0000 2019","id":1126128657540403200,"id_str":"1126128657540403200","text":"RT @Cointelegraph: Hackers withdraw 7,000 bitcoins in Binance exchange security breach\\nhttps:\\/\\/t.co\\/3aXHAqY4TY","truncated":false,"entities":{"hashtags":[],"symbols":[],"user_mentions":[{"screen_name":"Cointelegraph","name":"Cointelegraph","id":2207129125,"id_str":"2207129125","indices":[3,17]}],"urls":[{"url":"https:\\/\\/t.co\\/3aXHAqY4TY","expanded_url":"https:\\/\\/cointelegraph.com\\/news\\/hackers-withdraw-7-000-bitcoins-in-binance-crypto-exchange-security-breach","display_url":"cointelegraph.com\\/news\\/hackers-w\\u2026","indices":[87,110]}]},"source":"\\u003ca href=\\"http:\\/\\/twitter.com\\" rel=\\"nofollow\\"\\u003eTwitter Web Client\\u003c\\/a\\u003e","in_reply_to_status_id":null,"in_reply_to_status_id_str":null,"in_reply_to_user_id":null,"in_reply_to_user_id_str":null,"in_reply_to_screen_name":null,"geo":null,"coordinates":null,"place":null,"contributors":null,"retweeted_status":{"created_at":"Wed May 08 00:36:05 +0000 2019","id":1125922284013678592,"id_str":"1125922284013678592","text":"Hackers withdraw 7,000 bitcoins in Binance exchange security breach\\nhttps:\\/\\/t.co\\/3aXHAqY4TY","truncated":false,"entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[{"url":"https:\\/\\/t.co\\/3aXHAqY4TY","expanded_url":"https:\\/\\/cointelegraph.com\\/news\\/hackers-withdraw-7-000-bitcoins-in-binance-crypto-exchange-security-breach","display_url":"cointelegraph.com\\/news\\/hackers-w\\u2026","indices":[68,91]}]},"source":"\\u003ca href=\\"https:\\/\\/amplifr.com\\" rel=\\"nofollow\\"\\u003eAmplifr\\u003c\\/a\\u003e","in_reply_to_status_id":null,"in_reply_to_status_id_str":null,"in_reply_to_user_id":null,"in_reply_to_user_id_str":null,"in_reply_to_screen_name":null,"geo":null,"coordinates":null,"place":null,"contributors":null,"is_quote_status":false,"retweet_count":157,"favorite_count":255,"favorited":false,"retweeted":true,"possibly_sensitive":false,"lang":"en"},"is_quote_status":false,"retweet_count":157,"favorite_count":0,"favorited":false,"retweeted":true,"possibly_sensitive":false,"lang":"en"},"contributors_enabled":false,"is_translator":false,"is_translation_enabled":false,"profile_background_color":"F5F8FA","profile_background_image_url":null,"profile_background_image_url_https":null,"profile_background_tile":false,"profile_image_url":"http:\\/\\/pbs.twimg.com\\/profile_images\\/877770003189161984\\/HhaZWgHj_normal.jpg","profile_image_url_https":"https:\\/\\/pbs.twimg.com\\/profile_images\\/877770003189161984\\/HhaZWgHj_normal.jpg","profile_banner_url":"https:\\/\\/pbs.twimg.com\\/profile_banners\\/877769196762914816\\/1501313804","profile_link_color":"1DA1F2","profile_sidebar_border_color":"C0DEED","profile_sidebar_fill_color":"DDEEF6","profile_text_color":"333333","profile_use_background_image":true,"has_extended_profile":false,"default_profile":true,"default_profile_image":false,"can_media_tag":true,"followed_by":false,"following":false,"follow_request_sent":false,"notifications":false,"translator_type":"none","suspended":false,"needs_phone_verification":false,"email":"zupcoin@gmail.com"}',
    _json: {
        id: 877769196762914800,
        id_str: '877769196762914816',
        name: 'Zupcoin',
        screen_name: 'zupcoin',
        location: '',
        description: 'Zupcoin is a bot that lets you get the prices of any altcoin via messenger and track your investments',
        url: 'https://t.co/0d4Ai4MANA',
        entities: {
            url: [Object],
            description: [Object]
        },
        protected: false,
        followers_count: 47,
        friends_count: 224,
        listed_count: 0,
        created_at: 'Thu Jun 22 06:04:19 +0000 2017',
        favourites_count: 23,
        utc_offset: null,
        time_zone: null,
        geo_enabled: false,
        verified: false,
        statuses_count: 122,
        lang: null,
        status: {
            created_at: 'Wed May 08 14:16:09 +0000 2019',
            id: 1126128657540403200,
            id_str: '1126128657540403200',
            text: 'RT @Cointelegraph: Hackers withdraw 7,000 bitcoins in Binance exchange security breach\nhttps://t.co/3aXHAqY4TY',
            truncated: false,
            entities: [Object],
            source: '<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>',
            in_reply_to_status_id: null,
            in_reply_to_status_id_str: null,
            in_reply_to_user_id: null,
            in_reply_to_user_id_str: null,
            in_reply_to_screen_name: null,
            geo: null,
            coordinates: null,
            place: null,
            contributors: null,
            retweeted_status: [Object],
            is_quote_status: false,
            retweet_count: 157,
            favorite_count: 0,
            favorited: false,
            retweeted: true,
            possibly_sensitive: false,
            lang: 'en'
        },
        contributors_enabled: false,
        is_translator: false,
        is_translation_enabled: false,
        profile_background_color: 'F5F8FA',
        profile_background_image_url: null,
        profile_background_image_url_https: null,
        profile_background_tile: false,
        profile_image_url: 'http://pbs.twimg.com/profile_images/877770003189161984/HhaZWgHj_normal.jpg',
        profile_image_url_https: 'https://pbs.twimg.com/profile_images/877770003189161984/HhaZWgHj_normal.jpg',
        profile_banner_url: 'https://pbs.twimg.com/profile_banners/877769196762914816/1501313804',
        profile_link_color: '1DA1F2',
        profile_sidebar_border_color: 'C0DEED',
        profile_sidebar_fill_color: 'DDEEF6',
        profile_text_color: '333333',
        profile_use_background_image: true,
        has_extended_profile: false,
        default_profile: true,
        default_profile_image: false,
        can_media_tag: true,
        followed_by: false,
        following: false,
        follow_request_sent: false,
        notifications: false,
        translator_type: 'none',
        suspended: false,
        needs_phone_verification: false,
        email: 'zupcoin@gmail.com'
    },
    _accessLevel: 'read-write'
}

#### Google Profile Object
{
    provider: 'google',
    sub: '118245659938717303439',
    id: '118245659938717303439',
    displayName: 'Vivz BloodTerror',
    name: {
        givenName: 'Vivz',
        familyName: 'BloodTerror'
    },
    given_name: 'Vivz',
    family_name: 'BloodTerror',
    email_verified: true,
    verified: true,
    language: 'en',
    locale: undefined,
    email: 'vivek.9891@gmail.com',
    emails: [{
        value: 'vivek.9891@gmail.com',
        type: 'account'
    }],
    photos: [{
        value: 'https://lh3.googleusercontent.com/a-/AAuE7mC1vxq2qyVcvoCmM0aZpyTfvDq7TlU5Zz3At9sTog',
        type: 'default'
    }],
    picture: 'https://lh3.googleusercontent.com/a-/AAuE7mC1vxq2qyVcvoCmM0aZpyTfvDq7TlU5Zz3At9sTog',
    _raw: '{\n  "sub": "118245659938717303439",\n  "name": "Vivz BloodTerror",\n  "given_name": "Vivz",\n  "family_name": "BloodTerror",\n  "picture": "https://lh3.googleusercontent.com/a-/AAuE7mC1vxq2qyVcvoCmM0aZpyTfvDq7TlU5Zz3At9sTog",\n  "email": "vivek.9891@gmail.com",\n  "email_verified": true,\n  "locale": "en"\n}',
    _json: {
        sub: '118245659938717303439',
        name: 'Vivz BloodTerror',
        given_name: 'Vivz',
        family_name: 'BloodTerror',
        picture: 'https://lh3.googleusercontent.com/a-/AAuE7mC1vxq2qyVcvoCmM0aZpyTfvDq7TlU5Zz3At9sTog',
        email: 'vivek.9891@gmail.com',
        email_verified: true,
        locale: 'en'
    }
}

#### GitHub Profile Object

{
    id: '5139030',
    displayName: 'slidenerd',
    username: 'slidenerd',
    profileUrl: 'https://github.com/slidenerd',
    emails: [{
        value: 'slidenerd@gmail.com'
    }],
    photos: [{
        value: 'https://avatars3.githubusercontent.com/u/5139030?v=4'
    }],
    provider: 'github',
    _raw: '{"login":"slidenerd","id":5139030,"node_id":"MDQ6VXNlcjUxMzkwMzA=","avatar_url":"https://avatars3.githubusercontent.com/u/5139030?v=4","gravatar_id":"","url":"https://api.github.com/users/slidenerd","html_url":"https://github.com/slidenerd","followers_url":"https://api.github.com/users/slidenerd/followers","following_url":"https://api.github.com/users/slidenerd/following{/other_user}","gists_url":"https://api.github.com/users/slidenerd/gists{/gist_id}","starred_url":"https://api.github.com/users/slidenerd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/slidenerd/subscriptions","organizations_url":"https://api.github.com/users/slidenerd/orgs","repos_url":"https://api.github.com/users/slidenerd/repos","events_url":"https://api.github.com/users/slidenerd/events{/privacy}","received_events_url":"https://api.github.com/users/slidenerd/received_events","type":"User","site_admin":false,"name":"slidenerd","company":"slidenerd","blog":"http://slidenerd.com","location":"Mumbai","email":"slidenerd@gmail.com","hireable":true,"bio":"Bots, AI, advanced web frameworks, ohlc applications, you name it! I build it!","public_repos":74,"public_gists":6,"followers":3231,"following":1,"created_at":"2013-08-01T14:17:19Z","updated_at":"2019-11-08T13:35:04Z"}',
    _json: {
        login: 'slidenerd',
        id: 5139030,
        node_id: 'MDQ6VXNlcjUxMzkwMzA=',
        avatar_url: 'https://avatars3.githubusercontent.com/u/5139030?v=4',
        gravatar_id: '',
        url: 'https://api.github.com/users/slidenerd',
        html_url: 'https://github.com/slidenerd',
        followers_url: 'https://api.github.com/users/slidenerd/followers',
        following_url: 'https://api.github.com/users/slidenerd/following{/other_user}',
        gists_url: 'https://api.github.com/users/slidenerd/gists{/gist_id}',
        starred_url: 'https://api.github.com/users/slidenerd/starred{/owner}{/repo}',
        subscriptions_url: 'https://api.github.com/users/slidenerd/subscriptions',
        organizations_url: 'https://api.github.com/users/slidenerd/orgs',
        repos_url: 'https://api.github.com/users/slidenerd/repos',
        events_url: 'https://api.github.com/users/slidenerd/events{/privacy}',
        received_events_url: 'https://api.github.com/users/slidenerd/received_events',
        type: 'User',
        site_admin: false,
        name: 'slidenerd',
        company: 'slidenerd',
        blog: 'http://slidenerd.com',
        location: 'Mumbai',
        email: 'slidenerd@gmail.com',
        hireable: true,
        bio: 'Bots, AI, advanced web frameworks, ohlc applications, you name it! I build it!',
        public_repos: 74,
        public_gists: 6,
        followers: 3231,
        following: 1,
        created_at: '2013-08-01T14:17:19Z',
        updated_at: '2019-11-08T13:35:04Z'
    }
}


router.get('/auth/facebook/callback', (req, res, next) => {
  passport.authenticate('facebook', (err, user, info) => {
    console.log('facebook callback triggered', err, user, info)
    if (err) {
      return next(err)
    }
    if (!user) {
      console.log(
        'facebook authenticate user not found',
        user,
        info,
        req.session,
        req.user
      )
      return res.status(401).json({ message: info })
    }
    req.logIn(user, (err) => {
      if (err) {
        return next(err)
      }
      console.log(
        'facebook authenticate user FOUND',
        user,
        info,
        req.session,
        req.user
      )
      res.header('e', new Date(req.session.cookie.expires).getTime())
      return res.json(req.user)
    })
  })(req, res, next)
})
